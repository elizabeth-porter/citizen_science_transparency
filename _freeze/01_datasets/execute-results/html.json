{
  "hash": "82e9528f27950748ab9801d1d31b9a38",
  "result": {
    "markdown": "---\ntitle: \"Data Cleaning and Dataset Creation\"\n---\n\n\n## Background\n\nThis is the initial data cleaning and manipulations to create the final datasets used in the [Analysis](02_analysis.html). The final datasets are saved to CSV as:\n\n1) **Unique Publications:** `data/publication_clean.csv` where *each row is an individual publication*, to facilitate analysis at the level of the publication\n\n2) **Citizen Science Project-Publication Cases:** `data/csp_publication_clean.csv` where *each row is a unique citizen science project-publication combination*, to facilitate analysis at the level of the citizen science project\n\n## Setup\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\n# load necessary packages & preferred settings\n  library(tidyverse)\n  library(viridis)\n  \n  theme_set(theme_light())\n```\n:::\n\n\n## Load and Clean Data\n\n### **Included Publications**\n*Literature metadata exported from [Web of Science (WoS) Core Collection](https://access.clarivate.com/login?app=wos&alternative=true&shibShireURL=https:%2F%2Fwww.webofknowledge.com%2F%3Fauth%3DShibboleth&shibReturnURL=https:%2F%2Fwww.webofknowledge.com%2F&roaming=true){target=\"_blank\"}*\\\n\n:::{.panel-tabset}\n\n### Load Data\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_publication = read_csv(\"data/wos_export.csv\") %>% as_tibble()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 277 Columns: 72\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (49): article_title, publication_type, authors, book_editors, book_grou...\ndbl  (11): publication_year, cited_reference_count, times_cited_wo_s_core, t...\nlgl  (11): book_authors, book_author_full_names, group_authors, book_series_...\ndate  (1): date_of_export\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\n#view(df_publication)\n```\n:::\n\n\n### Quick Check\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(df_publication)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 72\n  article_title           publication_year publication_type authors book_authors\n  <chr>                              <dbl> <chr>            <chr>   <lgl>       \n1 Phylogenetic Endemism …             2021 J                Aceved… NA          \n2 Behaviour and landscap…             2024 J                Adams,… NA          \n3 Integrated modeling of…             2021 J                Adde, … NA          \n4 Declining scaup popula…             2001 J                Afton,… NA          \n5 Does Species Compositi…             2011 J                Alisau… NA          \n6 Mapping shifts in spat…             2021 J                Allen,… NA          \n# ℹ 67 more variables: book_editors <chr>, book_group_authors <chr>,\n#   author_full_names <chr>, book_author_full_names <lgl>, group_authors <lgl>,\n#   source_title <chr>, book_series_title <chr>, book_series_subtitle <lgl>,\n#   language <chr>, document_type <chr>, conference_title <chr>,\n#   conference_date <chr>, conference_location <chr>, conference_sponsor <lgl>,\n#   conference_host <lgl>, author_keywords <chr>, keywords_plus <chr>,\n#   abstract <chr>, addresses <chr>, affiliations <chr>, …\n```\n:::\n\n```{.r .cell-code}\ntail(df_publication)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 72\n  article_title           publication_year publication_type authors book_authors\n  <chr>                              <dbl> <chr>            <chr>   <lgl>       \n1 Drivers of demographic…             2018 J                Wilson… NA          \n2 Similarity between agr…             2020 J                Wilson… NA          \n3 Integrating regional a…             2022 J                Zhao, … NA          \n4 Borrelia burgdorferi a…             2022 J                Zinck,… NA          \n5 Climatic constraints o…             2011 J                Zucker… NA          \n6 Overlapping Landscapes…             2012 J                Zucker… NA          \n# ℹ 67 more variables: book_editors <chr>, book_group_authors <chr>,\n#   author_full_names <chr>, book_author_full_names <lgl>, group_authors <lgl>,\n#   source_title <chr>, book_series_title <chr>, book_series_subtitle <lgl>,\n#   language <chr>, document_type <chr>, conference_title <chr>,\n#   conference_date <chr>, conference_location <chr>, conference_sponsor <lgl>,\n#   conference_host <lgl>, author_keywords <chr>, keywords_plus <chr>,\n#   abstract <chr>, addresses <chr>, affiliations <chr>, …\n```\n:::\n:::\n\n\n:::\n\n\n### **Journal Impact Factors**\n*from [Clarivate Journal Citation Report](https://clarivate.com/academia-government/scientific-and-academic-research/research-funding-analytics/journal-citation-reports/){target=\"_blank\"}*\n\nFirst we extracted the names of all the journals that were represented in the included publications.\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\njournal_list = \n  df_publication %>% \n  group_by(source_title) %>% \n  summarise(count = n()) %>% \n  arrange(desc(count))\n\n# Save list as a csv\nwrite.csv(journal_list, file = \"data/journal_list.csv\")\n```\n:::\n\n\nUsing this list, we searched for each journal in the Clarivate Journal Citation Report database, exported all available journal impact factor data, and merged it into one master file. \n\n:::{.panel-tabset}\n\n### Load Data\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_jif = read_csv(\"data/journal_impact_factors.csv\") %>% as_tibble()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 1711 Columns: 3\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (1): source_title\ndbl (2): publication_year, jif\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\nview(df_jif)\n```\n:::\n\n\n### Quick Check\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(df_jif)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 3\n  source_title                         publication_year   jif\n  <chr>                                           <dbl> <dbl>\n1 AGRICULTURE ECOSYSTEMS & ENVIRONMENT             1997 0.661\n2 AGRICULTURE ECOSYSTEMS & ENVIRONMENT             1998 0.643\n3 AGRICULTURE ECOSYSTEMS & ENVIRONMENT             1999 0.975\n4 AGRICULTURE ECOSYSTEMS & ENVIRONMENT             2000 0.903\n5 AGRICULTURE ECOSYSTEMS & ENVIRONMENT             2001 1.30 \n6 AGRICULTURE ECOSYSTEMS & ENVIRONMENT             2002 1.37 \n```\n:::\n\n```{.r .cell-code}\ntail(df_jif)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 3\n  source_title                                            publication_year   jif\n  <chr>                                                              <dbl> <dbl>\n1 PROCEEDINGS OF THE NATIONAL ACADEMY OF SCIENCES OF THE…             2002 10.7 \n2 PROCEEDINGS OF THE NATIONAL ACADEMY OF SCIENCES OF THE…             2001 10.9 \n3 PROCEEDINGS OF THE NATIONAL ACADEMY OF SCIENCES OF THE…             2000 10.8 \n4 PROCEEDINGS OF THE NATIONAL ACADEMY OF SCIENCES OF THE…             1999 10.3 \n5 PROCEEDINGS OF THE NATIONAL ACADEMY OF SCIENCES OF THE…             1998  9.82\n6 PROCEEDINGS OF THE NATIONAL ACADEMY OF SCIENCES OF THE…             1997  9.04\n```\n:::\n:::\n\n\n:::\n\n### **Citizen Science Data**\n\n#### Unique Publications\n\n*Final dataset 1) `data/publication_clean.csv` where *each row is an individual publication*, to facilitate analysis at the level of the publication.*\n\nWe joined the journal impact factors to the Web of Science publication metadata, along with a count of citizen science projects used in each publication (exported from Covidence).\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\ndf_pub_intermediate = read_csv(\"data/publication_intermediate.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 277 Columns: 75\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (50): short_name, article_title, publication_type, authors, book_editor...\ndbl  (13): covidence_id, publication_year, cs_count, cited_reference_count, ...\nlgl  (11): book_authors, book_author_full_names, group_authors, book_series_...\ndate  (1): date_of_export\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code  code-fold=\"true\"}\ndf_publication_jif = df_pub_intermediate %>% \n  left_join(\n    df_jif %>% \n      dplyr::select(source_title, \n                    publication_year, \n                    jif),\n    by = c(\"source_title\", \n           \"publication_year\")) %>% \n  dplyr::relocate(jif, .after = \"publication_year\")\n\n# view(df_publication_jif)\n\n# check for NA values (i.e., publications with no available matching JIF)\nna_values = df_publication_jif[is.na(df_publication_jif$jif), ] \n\nview(na_values) # 61 with no available matching JIF\n```\n:::\n\n\nSave this formatted data for use in analysis:\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_csv(df_publication_jif, \"data/publication_clean.csv\")\n```\n:::\n\n\n:::{.panel-tabset}\n\n### Load Data\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_publication_clean = read_csv(\"data/publication_clean.csv\") %>% as_tibble()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 277 Columns: 76\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (50): short_name, article_title, publication_type, authors, book_editor...\ndbl  (14): covidence_id, publication_year, jif, cs_count, cited_reference_co...\nlgl  (11): book_authors, book_author_full_names, group_authors, book_series_...\ndate  (1): date_of_export\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n\n### Quick Check\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(df_publication_clean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 76\n  covidence_id short_name      article_title     publication_year   jif cs_count\n         <dbl> <chr>           <chr>                        <dbl> <dbl>    <dbl>\n1          415 Acevedo 2021    Phylogenetic End…             2021  4.50        1\n2          187 Adams 2024      Behaviour and la…             2024 NA           1\n3           41 Adde 2021       Integrated model…             2021  3.59        1\n4          135 Afton 2001      Declining scaup …             2001  1.59        1\n5          122 Alisauskas 2011 Does Species Com…             2011 NA           1\n6          396 Allen 2021      Mapping shifts i…             2021  7.56        1\n# ℹ 70 more variables: publication_type <chr>, authors <chr>,\n#   book_authors <lgl>, book_editors <chr>, book_group_authors <chr>,\n#   author_full_names <chr>, book_author_full_names <lgl>, group_authors <lgl>,\n#   source_title <chr>, book_series_title <chr>, book_series_subtitle <lgl>,\n#   language <chr>, document_type <chr>, conference_title <chr>,\n#   conference_date <chr>, conference_location <chr>, conference_sponsor <lgl>,\n#   conference_host <lgl>, author_keywords <chr>, keywords_plus <chr>, …\n```\n:::\n\n```{.r .cell-code}\ntail(df_publication_clean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 76\n  covidence_id short_name      article_title     publication_year   jif cs_count\n         <dbl> <chr>           <chr>                        <dbl> <dbl>    <dbl>\n1          211 Wilson 2018     Drivers of demog…             2018  4.01        2\n2           49 Wilson 2020     Similarity betwe…             2020  5.57        1\n3          320 Zhao 2022       Integrating regi…             2022  5.9         1\n4           92 Zinck 2022      Borrelia burgdor…             2022  3.7         1\n5          102 Zuckerberg 2011 Climatic constra…             2011  4.94        1\n6           81 Zuckerberg 2012 Overlapping Land…             2012  1.64        2\n# ℹ 70 more variables: publication_type <chr>, authors <chr>,\n#   book_authors <lgl>, book_editors <chr>, book_group_authors <chr>,\n#   author_full_names <chr>, book_author_full_names <lgl>, group_authors <lgl>,\n#   source_title <chr>, book_series_title <chr>, book_series_subtitle <lgl>,\n#   language <chr>, document_type <chr>, conference_title <chr>,\n#   conference_date <chr>, conference_location <chr>, conference_sponsor <lgl>,\n#   conference_host <lgl>, author_keywords <chr>, keywords_plus <chr>, …\n```\n:::\n:::\n\n\n:::\n\n#### Citizen Science Project-Publication Cases\n\n*Final dataset 2) `data/csp_publication_clean.csv` where *each row is a unique citizen science project-publication combination*, to facilitate analysis at the level of the citizen science project.*\n\nWe separated out each unique citizen science project-publication case through a mix of data extraction in [Covidence](https://www.covidence.org/){target=\"_blank\"} and Excel.\n\nNext, the use of citizen science terms for each unique citizen science project in a publication was reviewed. Each unique citizen science project-publication (going forward, project-publication) case was assigned a transparency score (`transp_score`, 0 to 4) based on our scoring system.\n\nWhere possible, regional versions of citizen science projects were grouped (`cs_project_grouped`, for example, all provincial Breeding Bird Atlases were grouped under Breeding Bird Atlas).\n\nThe resulting intermediate dataset follows:\n\n:::{.panel-tabset}\n\n### Load Data\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_csp_pub_intermediate = read_csv(\"data/csp_publication_intermediate.csv\") %>% as_tibble()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 377 Columns: 80\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (54): short_name, article_title, cs_project, cs_project_grouped, cs_ter...\ndbl  (14): publication_year, jif, cs_count, transp_score, cited_reference_co...\nlgl  (11): book_authors, book_author_full_names, group_authors, book_series_...\ndate  (1): date_of_export\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n\n### Quick Check\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(df_csp_pub_intermediate)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 80\n  short_name      article_title       publication_year   jif cs_count cs_project\n  <chr>           <chr>                          <dbl> <dbl>    <dbl> <chr>     \n1 Acevedo 2021    Phylogenetic Endem…             2021  4.50        1 BBS       \n2 Adams 2024      Behaviour and land…             2024  3.38        1 CNS       \n3 Adde 2021       Integrated modelin…             2021  3.59        1 eBird     \n4 Afton 2001      Declining scaup po…             2001  1.59        1 NHS       \n5 Alisauskas 2011 Does Species Compo…             2011  1.30        1 NHS       \n6 Allen 2021      Mapping shifts in …             2021  7.56        1 BBS       \n# ℹ 74 more variables: cs_project_grouped <chr>, cs_term <chr>,\n#   cs_term_loc <chr>, transp_score <dbl>, publication_type <chr>,\n#   authors <chr>, book_authors <lgl>, book_editors <chr>,\n#   book_group_authors <chr>, author_full_names <chr>,\n#   book_author_full_names <lgl>, group_authors <lgl>, source_title <chr>,\n#   book_series_title <chr>, book_series_subtitle <lgl>, language <chr>,\n#   document_type <chr>, conference_title <chr>, conference_date <chr>, …\n```\n:::\n\n```{.r .cell-code}\ntail(df_csp_pub_intermediate)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 80\n  short_name      article_title       publication_year   jif cs_count cs_project\n  <chr>           <chr>                          <dbl> <dbl>    <dbl> <chr>     \n1 Wilson 2020     Similarity between…             2020  5.57        1 BBS       \n2 Zhao 2022       Integrating region…             2022  5.9         1 BBS       \n3 Zinck 2022      Borrelia burgdorfe…             2022  3.7         1 carcass r…\n4 Zuckerberg 2011 Climatic constrain…             2011  4.94        1 PFW       \n5 Zuckerberg 2012 Overlapping Landsc…             2012  1.64        2 PFW       \n6 Zuckerberg 2012 Overlapping Landsc…             2012  1.64        2 FBMP      \n# ℹ 74 more variables: cs_project_grouped <chr>, cs_term <chr>,\n#   cs_term_loc <chr>, transp_score <dbl>, publication_type <chr>,\n#   authors <chr>, book_authors <lgl>, book_editors <chr>,\n#   book_group_authors <chr>, author_full_names <chr>,\n#   book_author_full_names <lgl>, group_authors <lgl>, source_title <chr>,\n#   book_series_title <chr>, book_series_subtitle <lgl>, language <chr>,\n#   document_type <chr>, conference_title <chr>, conference_date <chr>, …\n```\n:::\n:::\n\n\n:::\n\nFor each project-publication case, we assigned a transparency group (`transp_group`; transparent, or not transparent).\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\n# categorize into transparent or not transparent\ndf_csp_publication = \n  df_csp_pub_intermediate %>% \n  mutate(transp_group = case_when(\n    transp_score <=2 ~ \"Not transparent\",\n    transp_score >=3 ~ \"Transparent\")) %>% \n  dplyr::relocate(transp_group, .after = transp_score)\n\n# also prepare data for logistic regression (1 = transparent, 0 = not transparent)\ndf_csp_publication = df_csp_publication %>% \n  filter(transp_group %in% \n           c(\"Transparent\", \n             \"Not transparent\")) %>% \n  mutate(\n    transp_binary = ifelse(transp_group == \"Transparent\", 1, 0),\n    cs_project_grouped = as.factor(cs_project_grouped),\n    publication_year = as.numeric(publication_year)\n  ) %>% \n  dplyr::relocate(transp_binary, .after = transp_group)\n```\n:::\n\n\nSave this formatted data for use in analysis:\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_csv(df_csp_publication, \"data/csp_publication_clean.csv\")\n```\n:::\n\n\n:::{.panel-tabset}\n\n### Load Data\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_csp_publication_clean = read_csv(\"data/csp_publication_clean.csv\") %>% as_tibble()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 377 Columns: 82\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (55): short_name, article_title, cs_project, cs_project_grouped, cs_ter...\ndbl  (15): publication_year, jif, cs_count, transp_score, transp_binary, cit...\nlgl  (11): book_authors, book_author_full_names, group_authors, book_series_...\ndate  (1): date_of_export\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n\n### Quick Check\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(df_csp_publication_clean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 82\n  short_name      article_title       publication_year   jif cs_count cs_project\n  <chr>           <chr>                          <dbl> <dbl>    <dbl> <chr>     \n1 Acevedo 2021    Phylogenetic Endem…             2021  4.50        1 BBS       \n2 Adams 2024      Behaviour and land…             2024  3.38        1 CNS       \n3 Adde 2021       Integrated modelin…             2021  3.59        1 eBird     \n4 Afton 2001      Declining scaup po…             2001  1.59        1 NHS       \n5 Alisauskas 2011 Does Species Compo…             2011  1.30        1 NHS       \n6 Allen 2021      Mapping shifts in …             2021  7.56        1 BBS       \n# ℹ 76 more variables: cs_project_grouped <chr>, cs_term <chr>,\n#   cs_term_loc <chr>, transp_score <dbl>, transp_group <chr>,\n#   transp_binary <dbl>, publication_type <chr>, authors <chr>,\n#   book_authors <lgl>, book_editors <chr>, book_group_authors <chr>,\n#   author_full_names <chr>, book_author_full_names <lgl>, group_authors <lgl>,\n#   source_title <chr>, book_series_title <chr>, book_series_subtitle <lgl>,\n#   language <chr>, document_type <chr>, conference_title <chr>, …\n```\n:::\n\n```{.r .cell-code}\ntail(df_csp_publication_clean)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 82\n  short_name      article_title       publication_year   jif cs_count cs_project\n  <chr>           <chr>                          <dbl> <dbl>    <dbl> <chr>     \n1 Wilson 2020     Similarity between…             2020  5.57        1 BBS       \n2 Zhao 2022       Integrating region…             2022  5.9         1 BBS       \n3 Zinck 2022      Borrelia burgdorfe…             2022  3.7         1 carcass r…\n4 Zuckerberg 2011 Climatic constrain…             2011  4.94        1 PFW       \n5 Zuckerberg 2012 Overlapping Landsc…             2012  1.64        2 PFW       \n6 Zuckerberg 2012 Overlapping Landsc…             2012  1.64        2 FBMP      \n# ℹ 76 more variables: cs_project_grouped <chr>, cs_term <chr>,\n#   cs_term_loc <chr>, transp_score <dbl>, transp_group <chr>,\n#   transp_binary <dbl>, publication_type <chr>, authors <chr>,\n#   book_authors <lgl>, book_editors <chr>, book_group_authors <chr>,\n#   author_full_names <chr>, book_author_full_names <lgl>, group_authors <lgl>,\n#   source_title <chr>, book_series_title <chr>, book_series_subtitle <lgl>,\n#   language <chr>, document_type <chr>, conference_title <chr>, …\n```\n:::\n:::\n\n\n:::\n\n\n",
    "supporting": [
      "01_datasets_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}